<!DOCTYPE HTML>
<html lang="en">
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Security | Introduction</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.6.7">
        
        
        <meta name="HandheldFriendly" content="true">
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="../gitbook/style.css">
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-search/search.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
    

        
    
    
    <link rel="next" href="../compatibility/Compatibility.html">
    
    
    <link rel="prev" href="../general-guidelines/GeneralGuidelines.html">
    

        
    </head>
    <body>
        
        
    <div class="book" data-level="4" data-chapter-title="Security" data-filepath="security/Security.md" data-basepath=".." data-revision="Tue Apr 05 2016 15:41:06 GMT+0000 (UTC)" data-innerlanguage="">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="1" data-path="TOC.html">
            
                
                    <a href="../TOC.html">
                
                        <i class="fa fa-check"></i>
                        
                            
                        
                        Table of Contents
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                
                        <i class="fa fa-check"></i><b>1.</b>
                        
                        Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2" data-path="design-principles/DesignPrinciples.html">
            
                
                    <a href="../design-principles/DesignPrinciples.html">
                
                        <i class="fa fa-check"></i><b>2.</b>
                        
                            
                        
                        Design Principles
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3" data-path="general-guidelines/GeneralGuidelines.html">
            
                
                    <a href="../general-guidelines/GeneralGuidelines.html">
                
                        <i class="fa fa-check"></i><b>3.</b>
                        
                            
                        
                        General Guidelines
                    </a>
            
            
        </li>
    
        <li class="chapter active" data-level="4" data-path="security/Security.html">
            
                
                    <a href="../security/Security.html">
                
                        <i class="fa fa-check"></i><b>4.</b>
                        
                            
                        
                        Security
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5" data-path="compatibility/Compatibility.html">
            
                
                    <a href="../compatibility/Compatibility.html">
                
                        <i class="fa fa-check"></i><b>5.</b>
                        
                            
                        
                        Compatibility
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6" data-path="naming/Naming.html">
            
                
                    <a href="../naming/Naming.html">
                
                        <i class="fa fa-check"></i><b>6.</b>
                        
                            
                        
                        Naming
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7" data-path="http/Http.html">
            
                
                    <a href="../http/Http.html">
                
                        <i class="fa fa-check"></i><b>7.</b>
                        
                            
                        
                        HTTP
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8" data-path="pagination/Pagination.html">
            
                
                    <a href="../pagination/Pagination.html">
                
                        <i class="fa fa-check"></i><b>8.</b>
                        
                            
                        
                        Pagination
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9" data-path="hyper-media/Hypermedia.html">
            
                
                    <a href="../hyper-media/Hypermedia.html">
                
                        <i class="fa fa-check"></i><b>9.</b>
                        
                            
                        
                        Hypermedia
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="10" data-path="data-formats/DataFormats.html">
            
                
                    <a href="../data-formats/DataFormats.html">
                
                        <i class="fa fa-check"></i><b>10.</b>
                        
                            
                        
                        Data Formats
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="11" data-path="common-data-objects/CommonDataObjects.html">
            
                
                    <a href="../common-data-objects/CommonDataObjects.html">
                
                        <i class="fa fa-check"></i><b>11.</b>
                        
                            
                        
                        Common Data Objects
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="12" data-path="common-headers/CommonHeaders.html">
            
                
                    <a href="../common-headers/CommonHeaders.html">
                
                        <i class="fa fa-check"></i><b>12.</b>
                        
                            
                        
                        Common Headers
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="13" data-path="api-discovery/ApiDiscovery.html">
            
                
                    <a href="../api-discovery/ApiDiscovery.html">
                
                        <i class="fa fa-check"></i><b>13.</b>
                        
                            
                        
                        API Discovery
                    </a>
            
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Published with GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../">Introduction</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="security">Security</h1>
<h2 id="must-secure-endpoints-with-oauth-20"><span style="color:red;font-weight:bold">Must:</span> Secure endpoints with OAuth 2.0</h2>
<p>Every API endpoint needs to be secured using OAuth 2.0. Please refer to the 
<a href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/2.0.md#security-definitions-object" target="_blank">official OpenAPI spec</a>
on how to specify security definitions in you API specification or take a look at the following example.</p>
<pre><code class="lang-yaml">securityDefinitions:
  oauth2:
    type: oauth2
    flow: implicit
    authorizationUrl: https://auth.zalando.com/oauth2/access_token?realm=services
    scopes:
      uid: Unique identifier of the user accessing the service.
      fulfillment-order-service.read: Allows to read from the fulfillment order service.
</code></pre>
<p>In order to see how to define and assign scopes, please refer to the next section.</p>
<h2 id="must-define-and-assign-scopes"><span style="color:red;font-weight:bold">Must:</span> Define and assign scopes</h2>
<p>Every API needs to define scopes and every endpoint needs to have a at least one scope assigned. Scopes are defined by a name and a description once per API specification, as shown in the previous section. Please refer to the following rules when creating scope names:</p>
<pre><code>&lt;scope&gt; ::= &lt;standard-scope&gt; |           -- should be sufficient for majority of use cases 
            &lt;resource-specific-scope&gt;    -- for special security access differentiation use cases 
&lt;standard-scope&gt; ::= &lt;application-id&gt;.&lt;access-type&gt; 
&lt;resource-specific-scope&gt; ::= &lt;application-id&gt;.&lt;resource-id&gt;.&lt;access-type&gt;

&lt;application-id&gt; ::= &lt;as defined via STUPS&gt;
&lt;access-type&gt; ::= read | write           -- might be extended in future
&lt;resource-id&gt; ::= &lt;free identifier following application-id syntax&gt;
</code></pre><p>APIs should stick to standard scopes by default -- for the majority of use cases, restricting access to specific APIs (with read vs. write differentiation) is sufficient for controlling access for client types like merchant or retailer business partners, customers or operational staff. We want to avoid too many, fine grained scopes increasing governance complexity without real value add. In some situations, where some API serves very different types of resources interesting for different stakeholder types, resource specific scopes may make sense.</p>
<p>Some examples for standard and resource-specific scopes:</p>
<table>
<thead>
<tr>
<th>Application ID</th>
<th>Resource ID</th>
<th>Access Type</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>fulfillment-order</code></td>
<td></td>
<td><code>read</code></td>
<td><code>fulfillment-order.read</code></td>
</tr>
<tr>
<td><code>fulfillment-order</code></td>
<td></td>
<td><code>write</code></td>
<td><code>fulfillment-order.write</code></td>
</tr>
<tr>
<td><code>sales-order</code></td>
<td><code>sales_order</code></td>
<td><code>read</code></td>
<td><code>sales-order.sales_order.read</code></td>
</tr>
<tr>
<td><code>sales-order</code></td>
<td><code>shipment_order</code></td>
<td><code>read</code></td>
<td><code>sales-order.shipment_order.read</code></td>
</tr>
</tbody>
</table>
<p>After scopes names are defined and the scope is declared in the security definition at the top of an API specification it should be assigned to each API operation by specifying a <a href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/2.0.md#securityRequirementObject" target="_blank"><code>security</code> requirement</a> like this:</p>
<pre><code class="lang-yaml">paths:
  /sales-orders/{order-number}:
    get:
      summary: Retrieves a sales order
      security:
        - oauth2:
          - sales-order-service.sales_order.read
</code></pre>
<p>In very rare cases a whole API or some selected endpoints may not require specific access control. However, to make this explicit you should assign the <code>uid</code> scope in this case. It&apos;s available to every OAuth2 account by default.</p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../general-guidelines/GeneralGuidelines.html" class="navigation navigation-prev " aria-label="Previous page: General Guidelines"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../compatibility/Compatibility.html" class="navigation navigation-next " aria-label="Next page: Compatibility"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../gitbook/app.js"></script>

    
    <script src="../gitbook/plugins/gitbook-plugin-search/lunr.min.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-search/search.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-sharing/buttons.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"structured-toc":{},"gitbook-restructure-navigation":{"transformations":[{"from":0,"to":1}]},"restructure-navigation":{},"highlight":{},"search":{"maxIndexSize":1000000},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
